<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OPEN CHAT</title>
    <script src="{{ url_for('static', filename='js/jquery.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}" type="text/javascript"></script>
    <link href="{{ url_for('static', filename='css/bootstrap.css') }}" rel="stylesheet" id="bootstrap-css">
    <link href="../static/css/main.css" rel="stylesheet" id="main-css">
    <script>
        greet();
        onClickAsEnter();
    </script>
</head>

<body>

<div class="header">
    <h1>IMIX multimodel</h1>
    <p>The best multimodel framework in the world!</p>
</div>

<div class="topnav">
    <a href="#">Home</a>
    <a href="#">ReadMe</a>
    <a href="#" style="float: right">Link</a>
</div>

<div style="text-align: left;margin-left:20%;margin-top:100px;" >
    <div>
        <input type="file" id="file0" name="file" accept="image/*" required>
        <input type="button" id="b0" onclick="test()" value="predict">
    </div>
    <div style="float:left;">
<!--        <a href="javascript:;" class="file">选择文件-->
<!--            <input type="file" name="file" id="file0"><br>-->
<!--        </a>-->
        <img src="" id="img0" style="margin-top:20px;width: 35rem;height: 30rem;">
    </div>
</div>

<div class="chat_window">
    <div class="top_menu">
        <div class="buttons">
            <div class="button close_button"></div>
            <div class="button minimize"></div>
            <div class="button maximize"></div>
        </div>
        <div class="title">{{title}}</div>
    </div>
    <ul class="messages"></ul>
    <div class="bottom_wrapper clearfix">
        <div class="message_input_wrapper">
            <input class="message_input"
                   onkeyup="return onClickAsEnter(event)"
                   placeholder="Talk to AI !"/>
        </div>

        <div class="send_message"
             id="send_message"
             onclick="onSendButtonClicked()">

            <div class="icon"></div>
            <div class="text">Send</div>
        </div>

    </div>
</div>
<div class="message_template">
    <li class="message">
        <div class="avatar"></div>
        <div class="text_wrapper">
            <div class="text"></div>
        </div>
    </li>
</div>

<script type="text/javascript">
    $("#file0").change(function(){
        var objUrl = getObjectURL(this.files[0]) ;//获取文件信息 blob格式，只能用于预览图像
        var obj = document.getElementById("file0");
        console.log("objUrl = "+objUrl);
        if (objUrl) {
            $("#img0").attr("src", objUrl);
        }
    });



    function getObjectURL(file) {
        var url = null;
        if(window.createObjectURL!=undefined) {
            url = window.createObjectURL(file) ;
        }else if (window.URL!=undefined) { // mozilla(firefox)
            url = window.URL.createObjectURL(file) ;
        }else if (window.webkitURL!=undefined) { // webkit or chrome
            url = window.webkitURL.createObjectURL(file) ;
        }
        return url ;
    }
</script>

</body>
</html>
